<!DOCTYPE html>
<html lang="et">
<head>
  <title>Soovinimekiri</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='meediariiul.css') }}">
</head>
<body>

<header>
  <div class="logo-title">
    <img src="{{ url_for('static', filename='pildid/books.png') }}" width="60" alt="Logo">
    <h1>MeediaRiiul</h1>
  </div>

  <nav class="menÃ¼Ã¼">
    <a href="{{ url_for('avaleht') }}">AVALEHT</a>
    <a href="{{ url_for('kogu') }}">KOGU KOGUMIK</a>
    <a href="{{ url_for('lisa') }}">LISA UUS TEOS</a>
    <a href="{{ url_for('soovid') }}">SOOVINIMEKIRI</a>
    <a href="{{ url_for('statistika') }}">STATISTIKA</a>
    <a href="{{ url_for('profiil') }}">PROFIIL</a>
    {% if current_user.is_authenticated %}
    <div class="kasutaja-nurk">
      <span>{{ current_user.kasutajanimi }}</span>
      <a class="logout" href="{{ url_for('logout') }}">LOGI VÃ„LJA</a>
    </div>
    {% endif %}
  </nav>
</header>

<main class="page">
  <h2>â­ SOOVINIMEKIRI</h2>

<form method="GET" action="{{ url_for('soovid') }}" class="search-container">
    <input type="text" name="otsi"
           placeholder="Otsi pealkirja, autorit vÃµi Å¾anrit..."
           value="{{ request.args.get('otsi', '') }}"
           class="otsinguvÃ¤li">

    <input type="hidden" name="tÃ¼Ã¼p" value="{{ tÃ¼Ã¼p_filter }}">
    <input type="hidden" name="staatus" value="{{ staatus_filter }}">
    <input type="hidden" name="hinne" value="{{ hinne_filter }}">
    <input type="hidden" name="zanr" value="{{ zanr_filter }}">

    

    <button type="submit" class="otsi-btn">Otsi</button>

</form>
<div class="filter-buttons">
  <a href="{{ url_for('soovid', filter='kÃµik') }}" class="filter {{ 'active' if filter=='kÃµik' }}">KÃµik</a>
  <a href="{{ url_for('soovid', filter='raamat') }}" class="filter {{ 'raamat' in filter }}">ğŸ“š Raamatud</a>
  <a href="{{ url_for('soovid', filter='film') }}" class="filter {{ 'film' in filter }}">ğŸ¬ Filmid</a>
  <a href="{{ url_for('soovid', filter='sari') }}" class="filter {{ 'sari' in filter }}">ğŸ“º Sarjad</a>
</div>

  {% if tabel %}
  <div class="tabelikarp">
<table class="ilus-tabel">
<thead>
<tr>
  <th>Pealkiri</th>
  <th>TÃ¼Ã¼p</th>
  <th>Autor / ReÅ¾issÃ¶Ã¶r</th>
  <th>Staatus</th>
  <th>Muuda</th>
  <th>Kustuta</th>
</tr>
</thead>

<tbody>
{% for rida in tabel %}
<tr onclick="toggleDetails('{{ rida.id }}')" class="clickable-row">
  <td>{{ rida.pealkiri }}</td>
  <td>{{ rida.meedia_tÃ¼Ã¼p }}</td>
  <td>{{ rida.autor_vÃµi_reÅ¾issÃ¶Ã¶r }}</td>
  <td>{{ rida.kuupÃ¤ev }}</td>
  <td>
      <a class="btn-muuda" href="{{ url_for('muuda', id=rida.id) }}">Muuda</a>
  </td>
  <td>
      <a class="btn-kustuta" href="{{ url_for('kustuta', id=rida.id) }}"
         onclick="return confirm('Kustutada?')">ğŸ—‘</a>
  </td>
</tr>

<tr id="details-{{ rida.id }}" class="detail-row" style="display:none;">
  <td colspan="6">
      {% if rida.arvamus %}<strong>Arvamus:</strong> {{ rida.arvamus }}<br>{% endif %}
      {% if rida.lisainfo %}<strong>Lisainfo:</strong> {{ rida.lisainfo }}{% endif %}
  </td>
</tr>
{% endfor %}
{% if total_pages > 1 %}
<div class="pagination">
  {% if page > 1 %}
    <a href="?filter={{ filter }}&page={{ page - 1 }}" class="pag-btn">â€¹ Eelmine</a>
  {% endif %}

  {% for i in range(1, total_pages + 1) %}
    <a href="?filter={{ filter }}&page={{ i }}" class="pag-btn {% if i == page %}active{% endif %}">{{ i }}</a>
  {% endfor %}

  {% if page < total_pages %}
    <a href="?filter={{ filter }}&page={{ page + 1 }}" class="pag-btn">JÃ¤rgmine â€º</a>
  {% endif %}
</div>
{% endif %}
      </tbody>

    </table>
  </div>
  {% else %}
    <p style="text-align:center; font-size:18px; margin-top:20px;">ğŸ“Œ Soovinimekiri on tÃ¼hi.</p>
  {% endif %}
</main>

</body>
</html>
