<!DOCTYPE html>
<html lang="et">
<head>
  <title>Lisa teos</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='meediariiul.css') }}">
</head>

<body>
<header>
  <div class="logo-title">
    <img src="{{ url_for('static', filename='pildid/books.png') }}" width="60" alt="Logo">
    <h1>MeediaRiiul</h1>
  </div>

  <nav class="men√º√º">
    <a href="{{ url_for('avaleht') }}">AVALEHT</a>
    <a href="{{ url_for('kogu') }}">KOGU KOGUMIK</a>
    <a href="{{ url_for('lisa') }}">LISA UUS TEOS</a>
    <a href="{{ url_for('soovid') }}">SOOVINIMEKIRI</a>
    <a href="{{ url_for('statistika') }}">STATISTIKA</a>
    <a href="{{ url_for('profiil') }}">PROFIIL</a>

    {% if current_user.is_authenticated %}
      <div class="kasutaja-nurk">
        <span>{{ current_user.kasutajanimi }}</span>
        <a href="{{ url_for('logout') }}" class="logout">LOGI V√ÑLJA</a>
      </div>
    {% else %}
      <a href="{{ url_for('login') }}">LOGI SISSE</a>
    {% endif %}
  </nav>
</header>

<h2>LISA TEOS</h2>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-wrapper">
      {% for category, message in messages %}
        <div class="flash-box {{ category }}">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<form method="post" class="vormikast">

  <label>Pealkiri</label>
  <input name="pealkiri" required>

  <label>Meedia t√º√ºp</label>
  <select name="meedia_t√º√ºp" required>
    <option value="" disabled selected>Vali t√º√ºp‚Ä¶</option>
    <option value="raamat">üìö Raamat</option>
    <option value="film">üé¨ Film</option>
    <option value="sari">üì∫ Sari</option>
  </select>

  <label>≈Ωanr</label>
  <select name="≈æanr" id="zanrSelect" onchange="toggleCustomZanr()">
    <option value="" disabled selected>Vali ≈æanr‚Ä¶</option>
    {% for z in zanrid %}
      {% if z != "Muu" %}
        <option value="{{ z }}">{{ z }}</option>
      {% endif %}
    {% endfor %}
    <option value="custom">Muu</option>
  </select>

  <input type="text" name="zanr_custom" id="zanrCustomInput"
         placeholder="Sisesta ≈æanr" style="display:none;">

  <label>Autor / Re≈æiss√∂√∂r</label>
  <input name="autor_v√µi_re≈æiss√∂√∂r">

  <label>Staatus</label>
  <select name="staatus" required>
    <option value="" disabled selected>Vali staatus‚Ä¶</option>
    <option value="soovinimekiri">‚≠ê Soovinimekiri</option>
    <option value="pooleli">‚è≥ Pooleli</option>
    <option value="peatatud">‚õî Peatatud</option>
    <option value="lopetatud">‚úî L√µpetatud</option>
  </select>

  <label>Hinne (0‚Äì10)</label>
  <input type="number" name="hinne" step="0.1" min="0" max="10">

  <label>Arvamus</label>
  <textarea name="arvamus"></textarea>

  
  <label>Kuup√§ev</label>
  <input 
    type="date" 
    name="kuup√§ev"
    min="1900-01-01"
    max="2100-12-31">


  <label>Lisainfo</label>
  <input name="lisainfo">

  <button type="submit">Lisa</button>
</form>

<script>
function toggleCustomZanr() {
  const select = document.getElementById("zanrSelect");
  const custom = document.getElementById("zanrCustomInput");

  if (select.value === "custom") {
    custom.style.display = "block";
    custom.required = true;
  } else {
    custom.style.display = "none";
    custom.required = false;
  }
}
</script>

</body>
</html>


