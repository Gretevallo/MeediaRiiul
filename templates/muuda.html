<!DOCTYPE html>
<html lang="et">
<head>
  <title>Muuda teost</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='meediariiul.css') }}">
</head>

<body>
<header>
  <div class="logo-title">
    <img src="{{ url_for('static', filename='pildid/books.png') }}" width="60" alt="Logo">
    <h1>MeediaRiiul</h1>
  </div>

  <nav class="menÃ¼Ã¼">
    <a href="{{ url_for('avaleht') }}">AVALEHT</a>
    <a href="{{ url_for('kogu') }}">KOGU KOGUMIK</a>
    <a href="{{ url_for('lisa') }}">LISA UUS TEOS</a>
    <a href="{{ url_for('soovid') }}">SOOVINIMEKIRI</a>
    <a href="{{ url_for('statistika') }}">STATISTIKA</a>
    <a href="{{ url_for('profiil') }}">PROFIIL</a>
  </nav>
</header>




<h2>MUUDA TEOST</h2>
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-wrapper">
      {% for category, message in messages %}
        <div class="flash-box {{ category }}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}


<form method="post" class="vormikast">

  <label>Pealkiri</label>
  <input name="pealkiri" value="{{ teos.pealkiri }}" required>

  <label>Meedia tÃ¼Ã¼p</label>
  <select name="meedia_tÃ¼Ã¼p" required>
    <option value="raamat" {% if teos.meedia_tÃ¼Ã¼p=='raamat' %}selected{% endif %}>ğŸ“š Raamat</option>
    <option value="film" {% if teos.meedia_tÃ¼Ã¼p=='film' %}selected{% endif %}>ğŸ¬ Film</option>
    <option value="sari" {% if teos.meedia_tÃ¼Ã¼p=='sari' %}selected{% endif %}>ğŸ“º Sari</option>
  </select>

  <label>Å½anr</label>
<select name="Å¾anr" id="zanrSelect" onchange="toggleCustomZanr()">
  {% for z in zanrid %}
    {% if z != "Muu" %}
      <option value="{{ z }}">{{ z }}</option>
    {% endif %}
  {% endfor %}
  <option value="custom">Muu</option>
</select>

<input type="text" name="zanr_custom" id="zanrCustomInput" placeholder="Sisesta Å¾anr" style="display:none;">

  <label>Autor / ReÅ¾issÃ¶Ã¶r</label>
  <input name="autor_vÃµi_reÅ¾issÃ¶Ã¶r" value="{{ teos.autor_vÃµi_reÅ¾issÃ¶Ã¶r }}">

  <label>Staatus</label>
  <select name="staatus" required>
    <option value="" disabled selected>Vali staatusâ€¦</option>
    <option value="soovinimekiri">â­ Soovinimekiri</option>
    <option value="pooleli">â³ Pooleli</option>
    <option value="peatatud">â›” Peatatud</option>
    <option value="lopetatud">âœ” LÃµpetatud</option>
  </select>

  <label>Hinne (0â€“10)</label>
  <input type="number" name="hinne" step="0.1" min="0" max="10" value="{{ teos.hinne }}">

  <label>Arvamus</label>
  <textarea name="arvamus">{{ teos.arvamus }}</textarea>

  <label>KuupÃ¤ev</label>
  <input 
    type="date" 
    name="kuupÃ¤ev"
    min="1900-01-01"
    max="2100-12-31">

  <label>Lisainfo</label>
  <input name="lisainfo" value="{{ teos.lisainfo }}">

  <button type="submit">ğŸ’¾ Salvesta muudatused</button>
</form>

<script>
function toggleCustomZanr() {
  let select = document.getElementById("zanrSelect");
  let custom = document.getElementById("zanrCustomInput");

  if (select.value === "custom") {
    custom.style.display = "block";
    custom.required = true;  // Muu â‡’ muutub kohustuslikuks
  } else {
    custom.style.display = "none";
    custom.required = false;
  }
}
</script>

<footer class="footer">
    <p>MeediaRiiul 2025</p> 
    <p>Grete VÃ¤llo & Helena Sinilaid</p>
    <p class="footer-small">Veebirakendus meediakogumiku haldamiseks</p>
</footer>

</body>
</html>





